long flippingBits(long n) {
   return (unsigned long)(~n) & 0xFFFFFFFF;
}

